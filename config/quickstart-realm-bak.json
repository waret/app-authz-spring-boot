{
    "realm": "spring-boot-quickstart",
    "enabled": true,
    "userManagedAccessAllowed": "true",
    "privateKey": "MIICXAIBAAKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQABAoGAfmO8gVhyBxdqlxmIuglbz8bcjQbhXJLR2EoS8ngTXmN1bo2L90M0mUKSdc7qF10LgETBzqL8jYlQIbt+e6TH8fcEpKCjUlyq0Mf/vVbfZSNaVycY13nTzo27iPyWQHK5NLuJzn1xvxxrUeXI6A2WFpGEBLbHjwpx5WQG9A+2scECQQDvdn9NE75HPTVPxBqsEd2z10TKkl9CZxu10Qby3iQQmWLEJ9LNmy3acvKrE3gMiYNWb6xHPKiIqOR1as7L24aTAkEAtyvQOlCvr5kAjVqrEKXalj0Tzewjweuxc0pskvArTI2Oo070h65GpoIKLc9jf+UA69cRtquwP93aZKtW06U8dQJAF2Y44ks/mK5+eyDqik3koCI08qaC8HYq2wVl7G2QkJ6sbAaILtcvD92ToOvyGyeE0flvmDZxMYlvaZnaQ0lcSQJBAKZU6umJi3/xeEbkJqMfeLclD27XGEFoPeNrmdx0q10Azp4NfJAY+Z8KRyQCR2BEG+oNitBOZ+YXF9KCpH3cdmECQHEigJhYg+ykOvr1aiZUMFT72HU0jnmQe2FVekuG+LJUt2Tm7GtMjTFoGpf0JwrVuZN39fOYAlo+nTixgeW7X8Y=",
    "publicKey": "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQAB",
    "requiredCredentials": [
        "password"
    ],
    "users": [
        {
            "username": "alice",
            "enabled": true,
            "email": "alice@keycloak.org",
            "firstName": "Alice",
            "lastName": "In Chains",
            "credentials": [
                {
                    "type": "password",
                    "value": "alice"
                }
            ],
            "realmRoles": [
                "user", "uma_authorization"
            ],
            "clientRoles": {
                "photoz-resource": [
                    "manage-albums"
                ],
                "account": [
                    "manage-account"
                ]
            }
        },
        {
            "username": "jdoe",
            "enabled": true,
            "email": "jdoe@keycloak.org",
            "firstName": "John",
            "lastName": "Doe",
            "credentials": [
                {
                    "type": "password",
                    "value": "jdoe"
                }
            ],
            "realmRoles": [
                "user",
                "user-premium"
            ],
            "clientRoles": {
                "photoz-resource": [
                    "manage-albums"
                ],
                "account": [
                    "manage-account"
                ]
            }
        },
        {
            "username": "admin",
            "enabled": true,
            "email": "admin@admin.com",
            "firstName": "Admin",
            "lastName": "Istrator",
            "credentials": [
                {
                    "type": "password",
                    "value": "admin"
                }
            ],
            "realmRoles": [
                "admin", "uma_authorization"
            ],
            "clientRoles": {
                "realm-management": [
                    "realm-admin"
                ],
                "photoz-resource": [
                    "manage-albums"
                ],
                "account": [
                    "manage-account"
                ]
            }
        },
        {
            "username": "service-account-photoz-resource",
            "enabled": true,
            "email": "service-account-photoz-resource@placeholder.org",
            "serviceAccountClientId": "photoz-resource",
            "clientRoles": {
                "photoz-resource" : ["uma_protection"]
            }
        }
    ],
    "roles": {
        "realm": [
            {
                "name": "user",
                "description": "User privileges"
            },
            {
                "name": "user-premium",
                "description": "User premium privileges"
            }
        ]
    },
    "clients": [
        {
            "clientId": "photoz-resource",
            "secret": "secret",
            "enabled": true,
            "baseUrl": "http://localhost:8080",
            "authorizationServicesEnabled" : true,
            "adminUrl": "http://localhost:8080",
            "redirectUris": [
                "http://localhost:8080/*"
            ],
            "webOrigins" : ["http://localhost:8080"],
            "authorizationSettings": {
                "allowRemoteResourceManagement": false,
                "policyEnforcementMode": "ENFORCING",
                "resources": [
                    {
                        "name": "Alpha: Default Resource",
                        "uri": "/alpha/api/{resource}"
                    },
                    {
                        "name": "Alpha: Premium Resource",
                        "uri": "/alpha/api/premium"
                    },
                    {
                        "name": "Alpha: Admin Resource",
                        "uri": "/alpha/api/admin"
                    },
                    {
                        "name": "Photoz: Admin Resources",
                        "uri": "/photoz/admin/*",
                        "type": "http://photoz.com/admin",
                        "scopes": [
                            {
                                "name": "admin:manage"
                            }
                        ]
                    },
                    {
                        "name": "Photoz: User Profile Resource",
                        "uri": "/photoz/profile",
                        "type": "http://photoz.com/profile",
                        "scopes": [
                            {
                                "name": "profile:view"
                            }
                        ]
                    },
                    {
                        "name": "Photoz: Album Resource",
                        "uri": "/photoz/album/*",
                        "type": "http://photoz.com/album",
                        "scopes": [
                            {
                                "name": "album:delete"
                            },
                            {
                                "name": "album:view"
                            }
                        ]
                    }
                ],
                "policies": [
                    {
                        "name": "Alpha: Only Premium User Policy",
                        "type": "role",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "roles": "[{\"id\":\"user-premium\",\"required\":false}]"
                        }
                    },
                    {
                        "name": "Alpha: Only User Policy",
                        "type": "role",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "roles": "[{\"id\":\"user\",\"required\":false}]"
                        }
                    },
                    {
                        "name": "Alpha: Claim-Based Policy",
                        "type": "js",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "code": "var context = $evaluation.context;\n\nvar attributes = context.attributes;\n\nif (attributes.containsValue('some-claim', 'claim-value')) {\n    $evaluation.grant();\n}"
                        }
                    },
                    {
                        "name": "Alpha: Default Resource Permission",
                        "description": "A permission that applies to the default resource",
                        "type": "resource",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "resources": "[\"Alpha: Default Resource\"]",
                            "applyPolicies": "[\"Alpha: Only User Policy\"]"
                        }
                    },
                    {
                        "name": "Alpha: Premium Resource Permission",
                        "type": "resource",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "resources": "[\"Alpha: Premium Resource\"]",
                            "applyPolicies": "[\"Alpha: Only Premium User Policy\"]"
                        }
                    },
                    {
                        "name": "Alpha: Admin Resource Permission",
                        "type": "resource",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "resources": "[\"Alpha: Admin Resource\"]",
                            "applyPolicies": "[\"Alpha: Claim-Based Policy\"]"
                        }
                    },
                    {
                        "name": "Photoz: Only Owner and Administrators Policy",
                        "description": "Defines that only the resource owner and administrators can do something",
                        "type": "aggregate",
                        "logic": "POSITIVE",
                        "decisionStrategy": "AFFIRMATIVE",
                        "config": {
                            "applyPolicies": "[\"Photoz: Administration Policy\",\"Photoz: Only Owner Policy\"]"
                        }
                    },
                    {
                        "name": "Photoz: Administration Policy",
                        "description": "Defines that only administrators from a specific network address can do something.",
                        "type": "aggregate",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "applyPolicies": "[\"Photoz: Any Admin Policy\",\"Photoz: Only From a Specific Client Address\"]"
                        }
                    },
                    {
                        "name": "Photoz: Only From @keycloak.org or Admin",
                        "description": "Defines that only users from @keycloak.org",
                        "type": "js",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "code": "var context = $evaluation.getContext();\nvar identity = context.getIdentity();\nvar attributes = identity.getAttributes();\nvar email = attributes.getValue('email').asString(0);\n\nif (identity.hasRealmRole('admin') || email.endsWith('@keycloak.org')) {\n    $evaluation.grant();\n}"
                        }
                    },
                    {
                        "name": "Photoz: Only Owner Policy",
                        "description": "Defines that only the resource owner is allowed to do something",
                        "type": "js",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "code": "var permission = $evaluation.getPermission();\nvar identity = $evaluation.getContext().getIdentity();\nvar resource = permission.getResource();\nif (resource) {\nif (resource.getOwner().equals(identity.getId())) {\n$evaluation.grant();\n}}"
                        }
                    },
                    {
                        "name": "Photoz: Any Admin Policy",
                        "description": "Defines that adminsitrators can do something",
                        "type": "role",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "roles": "[{\"id\":\"admin\",\"required\":true}]"
                        }
                    },
                    {
                        "name": "Photoz: Only From a Specific Client Address",
                        "description": "Defines that only clients from a specific address can do something",
                        "type": "js",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "code": "var contextAttributes = $evaluation.getContext().getAttributes();\n\nif (contextAttributes.containsValue('kc.client.network.ip_address', '127.0.0.1')) {\n    $evaluation.grant();\n}"
                        }
                    },
                    {
                        "name": "Photoz: Any User Policy",
                        "description": "Defines that only users from well known clients are allowed to access",
                        "type": "role",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "roles": "[{\"id\":\"user\",\"required\":false},{\"id\":\"photoz-resource/manage-albums\",\"required\":true}]"
                        }
                    },
                    {
                        "name": "Photoz: Admin Resource Permission",
                        "description": "General policy for any administrative resource.",
                        "type": "resource",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "defaultResourceType": "http://photoz.com/admin",
                            "applyPolicies": "[\"Photoz: Administration Policy\"]",
                            "default": "true"
                        }
                    },
                    {
                        "name": "Photoz: Album Resource Permission",
                        "description": "A default permission that defines access for any album resource",
                        "type": "scope",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "resources": "[\"Photoz: Album Resource\"]",
                            "scopes": "[\"album:view\",\"album:delete\"]",
                            "applyPolicies": "[\"Photoz: Only Owner and Administrators Policy\"]"
                        }
                    },
                    {
                        "name": "Photoz: View User Permission",
                        "description": "Defines who is allowed to view an user profile",
                        "type": "scope",
                        "logic": "POSITIVE",
                        "decisionStrategy": "UNANIMOUS",
                        "config": {
                            "scopes": "[\"profile:view\"]",
                            "applyPolicies": "[\"Photoz: Only From @keycloak.org or Admin\"]"
                        }
                    }
                ]
            }
        },
        {
            "clientId": "web-public",
            "enabled": true,
            "adminUrl": "http://localhost:8080/",
            "baseUrl": "http://localhost:8080/",
            "publicClient": true,
            "consentRequired": false,
            "fullScopeAllowed": true,
            "redirectUris": [
                "http://localhost:8080/*"
            ],
            "webOrigins": ["http://localhost:8080"]
        }
    ]
}
